<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Animated Product Gallery</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<style>
:root{
  --bg:#f6f7fb;
  --card-bg:#fff;
  --accent:#111827;
  --muted:#6b7280;
  --shadow:0 10px 30px rgba(0,0,0,.08);
  --shadow-strong:0 20px 40px rgba(0,0,0,.12);
  --radius:14px;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui;
  background:var(--bg);
  color:var(--accent);
}

header{
  text-align:center;
  padding:48px 20px 10px;
}
header p{color:var(--muted)}

.grid{
  width:min(1200px,94%);
  margin:40px auto 80px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:24px;
}

.card{
  background:var(--card-bg);
  border-radius:var(--radius);
  padding:14px;
  position:relative;
  box-shadow:var(--shadow);
  will-change:transform;
}

.card:hover{
  box-shadow:var(--shadow-strong);
}

.media{
  height:160px;
  border-radius:10px;
  overflow:hidden;
  position:relative;
  background:#f8fafc;
}

.media img{
  width:110%;
  height:100%;
  object-fit:cover;
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  transition:transform .4s ease;
}

.meta{
  padding:12px 6px;
}
.title{font-weight:600}
.desc{font-size:13px;color:var(--muted)}
.bottom{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:8px;
}
.price{font-weight:700}
.cta{
  background:#111827;
  color:#fff;
  padding:8px 12px;
  border-radius:8px;
  text-decoration:none;
  font-size:13px;
}

footer{
  text-align:center;
  padding:20px;
  background:#000;
  color:#fff;
  font-size:14px;
}
</style>
</head>

<body>

<header>
  <h1>Animated Product Gallery</h1>
  <p>Smooth hover & tap — no jumping, no shaking</p>
</header>

<main class="grid" id="grid">

  <article class="card">
    <div class="media">
      <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&w=1200&q=80">
    </div>
    <div class="meta">
      <div class="title">Premium Headphones</div>
      <div class="desc">Studio-grade sound with noise cancellation</div>
      <div class="bottom">
        <div class="price">$199</div>
        <a class="cta" href="#">Details</a>
      </div>
    </div>
  </article>

  <article class="card">
    <div class="media">
      <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=1200&q=80">
    </div>
    <div class="meta">
      <div class="title">Running Sneakers</div>
      <div class="desc">Lightweight with cushioned comfort</div>
      <div class="bottom">
        <div class="price">$129</div>
        <a class="cta" href="#">Details</a>
      </div>
    </div>
  </article>

</main>

<footer>© 2025 Muksith — All rights reserved</footer>

<script>
gsap.registerPlugin(ScrollTrigger);

const cards = document.querySelectorAll(".card");
const isTouch = "ontouchstart" in window || navigator.maxTouchPoints > 0;

function map(v,i1,i2,o1,o2){
  return o1+(o2-o1)*((v-i1)/(i2-i1));
}

// Reveal
gsap.from(".card",{
  y:30,
  opacity:0,
  stagger:.1,
  duration:.7,
  ease:"power3.out",
  scrollTrigger:{trigger:"#grid",start:"top 85%"}
});

cards.forEach(card=>{
  const img = card.querySelector("img");

  if(!isTouch){
    card.addEventListener("pointerenter",()=>{
      gsap.to(card,{y:-8,duration:.3,ease:"power3.out"});
    });

    card.addEventListener("pointermove",e=>{
      const r = card.getBoundingClientRect();
      const dx = e.clientX-(r.left+r.width/2);
      const dy = e.clientY-(r.top+r.height/2);

      gsap.to(card,{
        rotationX:map(dy,-r.height/2,r.height/2,6,-6),
        rotationY:map(dx,-r.width/2,r.width/2,-6,6),
        transformPerspective:600,
        duration:.3
      });

      gsap.to(img,{
        x:map(dx,-r.width/2,r.width/2,10,-10),
        y:map(dy,-r.height/2,r.height/2,8,-8),
        scale:1.06,
        duration:.4
      });
    });

    card.addEventListener("pointerleave",()=>{
      gsap.to(card,{y:0,rotationX:0,rotationY:0,duration:.5});
      gsap.to(img,{x:0,y:0,scale:1,duration:.5});
    });

  } else {
    card.addEventListener("click",()=>{
      gsap.to(card,{y:-6,duration:.25});
      gsap.delayedCall(.25,()=>gsap.to(card,{y:0,duration:.35}));
    });
  }
});
</script>

</body>
</html>
